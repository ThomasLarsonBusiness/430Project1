(()=>{let e="";const t=async(t,n,o)=>{const a=document.querySelector("#content"),c=document.querySelector("#messages"),{status:r}=t;switch(r){case 200:c.innerHTML="<h1>Welcome!</h1>";break;case 201:c.innerHTML="<h1>Created</h1>";break;case 400:c.innerHTML="<h1>Bad Request:";break;case 404:c.innerHTML="<h1>Content Not Found</h1>";break;default:c.innerHTML="<h1>Status Code Not Implemented</h1>"}const d=await t.json();if(400===r&&(c.innerHTML+=` ${d.message}</h1>`),200===r||201===r){a.innerHTML="",e=o,document.querySelector("#login").style.display="none",document.querySelector("#squadronCreation").style.display="block",document.querySelector("#logout").style.display="block";for(const t in d.content){const n=document.createElement("div");n.classList.add("squadron");const o=document.createElement("h2"),c=document.createElement("p"),r=document.createElement("p"),l=document.createElement("p"),i=document.createElement("input");o.textContent=`${d.content[t].name}`,c.textContent=`Points Max: ${d.content[t].maxPoints}`,r.textContent=`Faction: ${d.content[t].faction}`,l.textContent="Edit: ",i.type="image",i.src=`/getImage?path=factions/${d.content[t].faction.replace(/ /g,"-").toLowerCase()}.png`,i.alt="Edit Squadron",i.title="Edit Squadron",i.addEventListener("click",(()=>{try{window.location.href=`/editSquadron?user=${e}&name=${o.textContent}`}catch(e){console.log(e)}})),n.appendChild(o),n.appendChild(c),n.appendChild(r),n.appendChild(l),n.appendChild(i),a.appendChild(n)}}},n=t=>{document.querySelector("#squadronCreation").style.display="none",document.querySelector("#login").style.display="block",document.querySelector("#messages").innerHTML="<h1>Logged Out</h1>",loginForm.querySelector("#userNameField").value="",e="",document.querySelector("#content").innerHTML=""};window.onload=()=>{const o=document.querySelector("#loginForm"),a=document.querySelector("#squadronForm"),c=document.querySelector("#logout");o.addEventListener("submit",(e=>(e.preventDefault(),(async e=>{const n=e.getAttribute("method"),o=e.querySelector("#userNameField").value,a=`name=${o}`,c=await fetch("/getUser",{method:n,headers:{"content-type":"application/x-www-form-urlencoded",accept:"application/json"},body:a});t(c,0,o)})(o),!1))),a.addEventListener("submit",(n=>(n.preventDefault(),(async n=>{const o=n.getAttribute("method"),a=document.querySelector("#squadronNameField").value,c=document.querySelector("#factionSelect").value,r=document.querySelector("#pointsLimit").value,d=`userName=${e}&name=${a}&faction=${c}&points=${r}`,l=await fetch("/createSquadron",{method:o,headers:{"content-type":"application/x-www-form-urlencoded",accept:"application/json"},body:d});t(l,0,e)})(a),!1))),c.addEventListener("click",(e=>(e.preventDefault(),n(),!1)))}})();